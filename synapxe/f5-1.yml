- name: Parse member list into structured data
  set_fact:
    pool_members: >-
      {{
        members.splitlines()
        | reject('match', '^\\s*$')  # Remove empty lines
        | map('regex_replace', '^([^:]+):(\\d+):(.+)$', '{"host": "\\1", "port": \\2, "name": "\\3"}')
        | map('from_yaml') | list
      }}


    - name: Debug parsed members
      debug:
        var: pool_members